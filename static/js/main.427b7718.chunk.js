(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{137:function(e,t,a){e.exports=a(330)},330:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(15),i=a.n(o),l=(a(84),a(5)),c=a(6),s=a(8),m=a(7),u=a(9),h=a(56),d=a.n(h),g=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{id:"navbar",className:"navbar"},r.a.createElement("div",{className:"navbar-block"},r.a.createElement("a",{className:"navbar-link",href:"/colorful-movies-frontend/"},r.a.createElement("img",{className:"navbar-logo mr-3",alt:"logo",src:d.a})),r.a.createElement("a",{className:"btn navbar-link",href:"/colorful-movies-frontend/movies"},"Rate a movie"),r.a.createElement("a",{className:"btn navbar-link",href:"/colorful-movies-frontend/profile"},"Profile")),r.a.createElement("div",{className:"navbar-block navbar-right"},!localStorage.getItem("userId")&&r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-primary",onClick:function(){return localStorage.setItem("userId","0")}},"Sign in")),localStorage.getItem("userId")&&r.a.createElement("button",{className:"btn btn-danger",onClick:function(){return localStorage.removeItem("userId")}},"Sign out"))))}}]),t}(n.Component),f=a(35),v=a(20),b=a(19),E=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(m.a)(t).call(this,e))).state={userId:""},a.handleChange=a.handleChange.bind(Object(v.a)(Object(v.a)(a))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){this.setState({userId:e.target.value})}},{key:"render",value:function(){return r.a.createElement("div",{className:"container-fluid",style:{textAlign:"center"}},r.a.createElement("div",{className:"welcome-fade"},r.a.createElement("h2",null,"Welcome to Afterimage!")," ",r.a.createElement("br",null),r.a.createElement("img",{className:"afterimage-logo mr-3",alt:"logo",src:d.a})),localStorage.getItem("userId")&&r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("hr",null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col col-4"},"Movies ",r.a.createElement("br",null),r.a.createElement(b.b,{className:"btn-sm btn-secondary",to:"/colorful-movies-frontend/movies"},"Search")),r.a.createElement("div",{className:"col col-4"},"Check user ",r.a.createElement("br",null),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Id",onChange:this.handleChange}),r.a.createElement(b.b,{className:"btn-sm btn-secondary",to:"/colorful-movies-frontend/users/".concat(this.state.userId)},"Search")),r.a.createElement("div",{className:"col col-4"},"Profile ",r.a.createElement("br",null),r.a.createElement(b.b,{className:"btn-sm btn-secondary",to:"/colorful-movies-frontend/users/".concat(localStorage.getItem("userId"))},"Profile")))))}}]),t}(n.Component),p=a(3),j=function(e,t){var a=new URL("https://afterimage-backend.herokuapp.com"+e);return fetch(a,Object(p.a)({},t,{headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*",userid:localStorage.getItem("userId")}}))},O=a(332),y=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(O.a,{className:"center-all",animation:"border"})}}]),t}(n.Component),N=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.props.error?r.a.createElement("div",{className:"container-fluid alert alert-danger center-all"},this.props.error):r.a.createElement("span",null)}}]),t}(n.Component),k=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.props.loading?r.a.createElement(y,null):this.props.error?r.a.createElement(N,{error:this.props.error}):r.a.createElement("div",{className:"container-fluid"},r.a.createElement("table",{className:"table",style:{tableLayout:"fixed",overflowX:"auto"}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Poster"),r.a.createElement("th",{scope:"col"},"Title"),r.a.createElement("th",{scope:"col"},"Year"))),r.a.createElement("tbody",null,this.props.movies.map(function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.Poster&&"N/A"!==e.Poster&&r.a.createElement("img",{alt:"Poster",src:e.Poster,className:"img-fluid"})),r.a.createElement("th",{scope:"row"},r.a.createElement(b.b,{to:"/colorful-movies-frontend/movies/".concat(e.imdbID)},e.Title)),r.a.createElement("td",null,e.Year))}))))}}]),t}(n.Component),C=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(m.a)(t).call(this,e))).state={searchName:"",searchYear:"",searchPage:1,maxPages:1,movies:{list:[],loading:!1,error:null}},a.handleNameChange=a.handleNameChange.bind(Object(v.a)(Object(v.a)(a))),a.handleYearChange=a.handleYearChange.bind(Object(v.a)(Object(v.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(v.a)(Object(v.a)(a))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"fetchMovies",value:function(e){var t=this;this.setState({searchPage:e||this.state.searchPage,movies:Object(p.a)({},this.state.movies,{loading:!0,error:null})},function(){j("/findMovies/".concat(t.state.searchName,"/").concat(t.state.searchYear||-1,"/").concat(t.state.searchPage),{method:"GET"}).then(function(e){return e.json()}).then(function(e){if("False"===e.Response)throw e.Error;t.setState({maxPages:Math.ceil(e.totalResults/10),movies:Object(p.a)({},t.state.movies,{list:e.Search})})}).catch(function(e){t.setState({movies:Object(p.a)({},t.state.movies,{error:e})})}).finally(function(){t.setState({movies:Object(p.a)({},t.state.movies,{loading:!1})})})})}},{key:"componentWillMount",value:function(){}},{key:"handleNameChange",value:function(e){this.setState({searchName:e.target.value})}},{key:"handleYearChange",value:function(e){this.setState({searchYear:e.target.value})}},{key:"handleSubmit",value:function(e){this.fetchMovies(1),e.preventDefault()}},{key:"changePage",value:function(e){var t=this;this.state.searchPage+e>=1&&this.state.searchPage+e<=this.state.maxPages&&this.setState(Object(p.a)({},this.state,{searchPage:this.state.searchPage+e}),function(){return t.fetchMovies()})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("form",{className:"form-inline",onSubmit:this.handleSubmit},r.a.createElement("input",{className:"form-control mr-3",type:"text",value:this.state.searchName,onChange:this.handleNameChange,style:{maxWidth:"50%"},placeholder:"Name"}),r.a.createElement("input",{className:"form-control mr-3",type:"number",value:this.state.searchYear,onChange:this.handleYearChange,style:{minWidth:"100px",maxWidth:"100px"},placeholder:"Year"}),r.a.createElement("input",{className:"btn btn-primary",type:"submit",value:"Submit"})),r.a.createElement("hr",null),r.a.createElement("h2",null,"Movies: "),this.state.movies.list&&1!==this.state.maxPages&&r.a.createElement("nav",{"aria-label":"Page navigation example"},r.a.createElement("ul",{className:"pagination"},r.a.createElement("li",{className:"page-item"},r.a.createElement("button",{className:"page-link",onClick:function(){return e.changePage(-1)}},"Previous")),r.a.createElement("li",{className:"page-item"},r.a.createElement("button",{className:"page-link",onClick:function(){return e.changePage(1)}},"Next")))),r.a.createElement(k,{movies:this.state.movies.list,loading:this.state.movies.loading,error:this.state.movies.error}),this.state.movies.list&&1!==this.state.maxPages&&r.a.createElement("nav",{"aria-label":"Page navigation example"},r.a.createElement("ul",{className:"pagination"},r.a.createElement("li",{className:"page-item"},r.a.createElement("button",{className:"page-link",onClick:function(){return e.changePage(-1)}},"Previous")),r.a.createElement("li",{className:"page-item"},r.a.createElement("button",{className:"page-link",onClick:function(){return e.changePage(1)}},"Next")))))}}]),t}(n.Component),S=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container-fluid center-window"},r.a.createElement("h1",null,"Page not found!"),r.a.createElement("img",{src:"https://i.kym-cdn.com/entries/icons/original/000/001/420/977.jpg",alt:"404",style:{width:"100%",height:"auto"}}))}}]),t}(n.Component),w=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("table",{className:"table",style:{tableLayout:"fixed"}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Poster"),r.a.createElement("th",{scope:"col"},"Title"),r.a.createElement("th",{scope:"col"},"Ratings"))),r.a.createElement("tbody",null,this.props.movies.map(function(e,t){return r.a.createElement("tr",{style:{height:"300px"},key:t},r.a.createElement("td",null,e.movie.Poster&&"N/A"!==e.movie.Poster&&r.a.createElement("img",{alt:"Poster",src:e.movie.Poster,className:"img-fluid"})),r.a.createElement("th",{scope:"row"},r.a.createElement(b.b,{to:"/colorful-movies-frontend/movies/".concat(e.movie.imdbID)},e.movie.Title)),r.a.createElement("td",null,r.a.createElement("ul",{className:"list-inline"},e.ratings.Colors.map(function(e,t){return r.a.createElement("li",{key:t,className:"list-inline-item"},r.a.createElement("button",{type:"button",disabled:!0,style:{width:"50px",height:"50px",backgroundColor:e,borderColor:"#000000",borderRadius:"50%"}}))}))))}))))}}]),t}(n.Component),P=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(m.a)(t).call(this,e))).state={movies:[],loading:!1,error:null},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"fetchMovies",value:function(){var e=this;this.setState({loading:!0,error:null},function(){j("/users/".concat(e.props.match.params.userid||localStorage.getItem("userId")),{method:"GET"}).then(function(e){return e.json()}).then(function(t){if(t.Error)throw t.Error;e.setState({movies:t.Result})}).catch(function(t){e.setState({error:t})}).finally(function(){e.setState({loading:!1})})})}},{key:"componentWillMount",value:function(){this.fetchMovies()}},{key:"render",value:function(){return this.state.loading?r.a.createElement(y,null):this.state.error?r.a.createElement(N,{error:this.state.error}):r.a.createElement("div",{className:"container-fluid"},r.a.createElement("h2",null,"Movies: "),r.a.createElement(w,{movies:this.state.movies}))}}]),t}(n.Component),x=a(135),I=a(129),R=a(334),M=a(333),W=a(335),T=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(m.a)(t).call(this,e))).handleChangeComplete=function(e){a.setState({rating:Object(p.a)({},a.state.rating,{rating:a.state.rating.rating.map(function(t){return t.id===a.state.editedColor?{color:e.hex,id:t.id}:t})})})},a.state={editedColor:null,movie:{movie:null,loading:!1,error:null},rating:{rating:[],loading:!1,error:null}},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"fetchMovie",value:function(){var e=this;this.setState({movie:Object(p.a)({},this.state.movie,{loading:!0,error:null})},function(){j("/findMovie/".concat(e.props.match.params.imdbID),{method:"GET"}).then(function(e){return e.json()}).then(function(t){if("False"===t.Response)throw t.Error;e.setState({movie:Object(p.a)({},e.state.movie,{movie:t})})}).catch(function(t){e.setState({movie:Object(p.a)({},e.state.movie,{error:t})})}).finally(function(){e.setState({movie:Object(p.a)({},e.state.movie,{loading:!1})})})})}},{key:"fetchRating",value:function(){var e=this;this.setState({rating:Object(p.a)({},this.state.rating,{loading:!0,error:null})},function(){j("/movies/".concat(e.props.match.params.imdbID),{method:"GET"}).then(function(e){return e.json()}).then(function(t){if(t.Error)throw t.Error;t.Result&&e.setState({rating:Object(p.a)({},e.state.rating,{rating:t.Result.map(function(e,t){return{color:e,id:t}})})})}).catch(function(t){e.setState({rating:Object(p.a)({},e.state.rating,{error:t})})}).finally(function(){e.setState({rating:Object(p.a)({},e.state.rating,{loading:!1})})})})}},{key:"addRating",value:function(){var e=this;this.setState({rating:Object(p.a)({},this.state.rating,{loading:!0,error:null})},function(){j("/movies/".concat(e.props.match.params.imdbID),{method:"PUT",body:JSON.stringify(Object(p.a)({},e.state.movie.movie,{Colors:e.state.rating.rating.map(function(e){return e.color})}))}).then(function(e){return e.json()}).then(function(e){if(e.Error)throw e.Error}).catch(function(t){e.setState({rating:Object(p.a)({},e.state.rating,{error:t})})}).finally(function(){e.setState({rating:Object(p.a)({},e.state.rating,{loading:!1})})})})}},{key:"deleteRating",value:function(){var e=this;this.setState({rating:Object(p.a)({},this.state.rating,{loading:!0,error:null})},function(){j("/movies/".concat(e.props.match.params.imdbID),{method:"DELETE"}).then(function(e){return e.json()}).then(function(t){if(t.Error)throw t.Error;e.setState({rating:Object(p.a)({},e.state.rating,{rating:[]})})}).catch(function(t){e.setState({rating:Object(p.a)({},e.state.rating,{error:t})})}).finally(function(){e.setState({rating:Object(p.a)({},e.state.rating,{loading:!1})})})})}},{key:"componentWillMount",value:function(){this.fetchMovie(),this.fetchRating()}},{key:"colorPicker",value:function(e){var t=this;return r.a.createElement("div",null,r.a.createElement(R.a,{trigger:"click",placement:"bottom",rootClose:!0,overlay:r.a.createElement(M.a,{id:"popover-basic",title:"Change rating"},r.a.createElement(I.SketchPicker,{color:e.color,onChangeComplete:this.handleChangeComplete}),r.a.createElement("button",{type:"button",className:"btn btn-danger","data-dismiss":"modal",onClick:function(){t.setState({rating:Object(p.a)({},t.state.rating,{rating:t.state.rating.rating.filter(function(t){return t.id!==e.id})})})}},"Remove color"))},r.a.createElement(W.a,{variant:"success",onClick:function(){return t.setState({editedColor:e.id})},style:{width:"50px",height:"50px",backgroundColor:e.color,borderColor:"#000000",borderRadius:"50%"}})))}},{key:"addColor",value:function(){this.setState({rating:Object(p.a)({},this.state.rating,{rating:[].concat(Object(x.a)(this.state.rating.rating),[{id:this.state.rating.rating.length,color:"#FFFFFF"}])})})}},{key:"render",value:function(){var e=this;return this.state.movie.loading?r.a.createElement(y,{loading:this.state.movie.loading}):this.state.movie.error?r.a.createElement(N,{error:this.state.movie.error}):r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("img",{className:"img-thumbnail",alt:"Poster",src:this.state.movie.movie.Poster,style:{minWidth:"200px",minHeight:"200px"}})),r.a.createElement("div",{className:"col"},r.a.createElement("b",null,"Rating:"),this.state.rating.loading?r.a.createElement(y,{loading:this.state.rating.loading}):this.state.rating.error?r.a.createElement(N,{error:this.state.rating.error}):r.a.createElement("div",null,r.a.createElement("button",{className:"btn-sm btn-info mr-2",onClick:function(){return e.addColor()}},"+"),r.a.createElement("button",{className:"btn-sm btn-primary mr-2",onClick:function(){return e.addRating()}},"Save"),r.a.createElement("button",{className:"btn-sm btn-danger mr-2",onClick:function(){return e.deleteRating()}},"Delete"),r.a.createElement("hr",null),r.a.createElement("ul",{className:"list-inline"},this.state.rating.rating.map(function(t){return r.a.createElement("li",{key:t.id,className:"list-inline-item"},e.colorPicker(t))}))))),r.a.createElement("br",null)," ",r.a.createElement("br",null),r.a.createElement("h1",null,this.state.movie.movie.Title),r.a.createElement("hr",null),r.a.createElement("h3",null,"Released: ",this.state.movie.movie.Released," "),r.a.createElement("h3",null,"Runtime: ",this.state.movie.movie.Runtime," "),r.a.createElement("hr",null),r.a.createElement("h4",null,r.a.createElement("b",null,"Director:")," ",this.state.movie.movie.Director," "),r.a.createElement("h4",null,r.a.createElement("b",null,"Writer:")," ",this.state.movie.movie.Writer," "),r.a.createElement("h4",null,r.a.createElement("b",null,"Actors:")," ",this.state.movie.movie.Actors),r.a.createElement("hr",null),r.a.createElement("h5",null,r.a.createElement("b",null,"Plot: ")," ",this.state.movie.movie.Plot),r.a.createElement("hr",null),r.a.createElement("h4",null,r.a.createElement("b",null,"Awards:")," ",this.state.movie.movie.Awards," "),r.a.createElement("h4",null,r.a.createElement("b",null,"IMDB rating:")," ",this.state.movie.movie.imdbRating))}}]),t}(n.Component),D=a(134),A=function(e){var t=e.component,a=Object(D.a)(e,["component"]);return r.a.createElement(f.b,Object.assign({},a,{render:function(e){return localStorage.getItem("userId")?r.a.createElement(t,e):r.a.createElement(f.a,{to:"/colorful-movies-frontend/signin"})}}))},Y=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(f.d,null,r.a.createElement(f.b,{exact:!0,path:"/colorful-movies-frontend/",component:E}),r.a.createElement(A,{exact:!0,path:"/colorful-movies-frontend/movies",component:C}),r.a.createElement(A,{path:"/colorful-movies-frontend/movies/:imdbID",component:T}),r.a.createElement(A,{path:"/colorful-movies-frontend/profile",component:P}),r.a.createElement(A,{path:"/colorful-movies-frontend/users/:userid",component:P}),r.a.createElement(f.b,{component:S}))}}]),t}(n.Component),F=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(g,null)," ",r.a.createElement("br",null),r.a.createElement(Y,null))}}]),t}(n.Component),L=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function G(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}i.a.render(r.a.createElement(b.a,null,r.a.createElement(F,null)),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/colorful-movies-frontend",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/colorful-movies-frontend","/service-worker.js");L?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):G(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):G(e)})}}()},56:function(e,t,a){e.exports=a.p+"static/media/billy.93e54ba9.jpg"},84:function(e,t,a){}},[[137,1,2]]]);
//# sourceMappingURL=main.427b7718.chunk.js.map